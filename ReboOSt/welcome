if start then
local ruserpass = ""
local type = ""

local function welcome()
 term.setCursorPos(21,9)
 print("Welcome |")
 sleep(0.1)
 term.setCursorPos(21,9)
 print("Welcome /")
 sleep(0.1)
 term.setCursorPos(21,9)
 print("Welcome -")
 sleep(0.1)
end

local function FirstDraw()
term.setCursorPos(1,1)
term.setBackgroundColor(tbar)
term.setTextColor(tbartxt)
print("                                                  ")
term.setCursorPos(1,1)
write(OStag)
if rosdebug then
 term.setTextColor(colors.red)
 print(" "..devpart.." "..version)
else
 print(" "..devpart.." "..version)
end
term.setCursorPos(46,1)
term.setTextColor(prog)
print("Login ")
print("                                                   ")
term.setCursorPos(1,18)
print("                                                   ")
term.setBackgroundColor(tbar)
term.setTextColor(tbartxt)
write("© Chickenbread 2015 - 2016                         ")
local fslen = string.len(freeSpace)
local fsX = 49 - fslen
term.setCursorPos(fsX,19)
write(freeSpace.." KB")
end

local function Login()
 paintutils.drawImage(Loginback,1,3)
 term.setBackgroundColor(colors.gray)
 term.setTextColor(colors.cyan)
 term.setCursorPos(8,9)
 write("Username:")
 term.setBackgroundColor(colors.white)
 write("                                   ")
 term.setCursorPos(17,8)
 write("                                   ")
 term.setCursorPos(17,10)
 write("                                   ")
 term.setCursorPos(18,9)
 UserName = read()
 local linput = string.lower(UserName)
 
 if linput == "reboot" then
  instashut = true
  shell.run("/ReboOSt/reboot")
 elseif linput == "shutdown" then
  instashut = true
  shell.run("/ReboOSt/shut-off")
 elseif UserName == "" then
  Login()
 end
 
 term.setBackgroundColor(colors.gray)
 term.setCursorPos(8,9)
 write("Password:")
 term.setBackgroundColor(colors.white)
 write("                                   ")
 term.setCursorPos(18,9)
 local UserPass = read("*")
 
 if UserPass == "" then
  Login()
 end
 if fs.exists("/User/"..UserName) then
 local file = fs.open("/User/"..UserName.."/..meta", "r")
 local fileData = {}
 local line = file.readLine()
 repeat
 table.insert(fileData,line)
 line = file.readLine()
 until line == nil
 ruserpass = fileData[1]
 type = fileData[2]
 file.close()
 userpasse = encryption.sha256(UserPass)
 if userpasse == ruserpass then
  if type == "admin" then
   admin = true
  else
   admin = false
  end
  login = true
  term.setTextColor(tbartxt)
  term.setCursorPos(1,1)
  term.setBackgroundColor(tbar)
  print("                                                   ")
  term.setCursorPos(1,1)
  write(OStag)
  if rosdebug then
   term.setTextColor(colors.red)
   print(" "..devpart.." "..version)
  else
   print(" "..devpart.." "..version)
  end
  print("                                                   ")
  paintutils.drawImage(Loginback,1,3)
  term.setCursorPos(1,18)
  term.setBackgroundColor(tbar)
  term.setTextColor(tbartxt)
  print("                                                   ")
  write("© Chickenbread 2015 - 2016")
  local fslen = string.len(freeSpace)
  local fsX = 49 - fslen
  term.setCursorPos(fsX,19)
  write(freeSpace.." KB")
  if fs.exists("/User/"..UserName.."/Pictures/wallpaper.nfp") then
   Wallpaper = paintutils.loadImage("/User/"..UserName.."/Pictures/wallpaper.nfp")
  else
   fs.copy("/User/root/Pictures/wallpaper.nfp", "/User/"..UserName.."/Pictures/wallpaper.nfp")
   Wallpaper = paintutils.loadImage("/User/"..UserName.."/Pictures/wallpaper.nfp")
  end
  if fs.exists("/User/"..UserName.."/..colortheme") then
   shell.run("/User/"..UserName.."/..colortheme")
  else
   crashcause = "Colortheme file not found!"
   shell.run("/ReboOSt/crash")
   os.shutdown()
  end
  term.setTextColor(colors.cyan)
  term.setBackgroundColor(colors.gray)
  welcome()
  welcome()
  shell.run("/ReboOSt/main")
  if login == false then
   shell.run("/ReboOSt/configs/colortheme")
   FirstDraw()
   Login()
  elseif login then
  end
 else
  term.setCursorPos(18,10)
  term.setTextColor(colors.cyan)
  print("Wrong Username or Password")
  sleep(1)
  Login()
 end
 else
  term.setCursorPos(18,10)
  term.setTextColor(colors.cyan)
  print("Wrong Username or Password")
  sleep(1)
  Login()
 end
end

local function Start()
 if login then
  term.setCursorBlink(false)
  shell.run("/ReboOSt/main")
  if shellacc then
  else
   Start()
  end
 else
  term.setCursorBlink(false)
  shell.run("/ReboOSt/configs/colortheme")
  FirstDraw()
  Login()
 end
end

Start()

else
 term.setTextColor(16384)
 term.setBackgroundColor(32768)
 print("You don't even have ReboOSt started!")
 term.setTextColor(1)
end
