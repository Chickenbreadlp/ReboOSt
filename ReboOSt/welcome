if start then
local ruserpass = ""
local type = ""

local function welcome()
 term.setCursorPos(21,9)
 print("Welcome |")
 sleep(0.1)
 term.setCursorPos(21,9)
 print("Welcome /")
 sleep(0.1)
 term.setCursorPos(21,9)
 print("Welcome -")
 sleep(0.1)
end

local function FirstDraw()
term.setCursorPos(1,1)
term.setBackgroundColor(tbar)
term.setTextColor(tbartxt)
print("                                                  ")
term.setCursorPos(1,1)
write(OStag)
if rosdebug then
 term.setTextColor(colors.red)
 print(" "..devpart.." "..version)
else
 print(" "..devpart.." "..version)
end
term.setCursorPos(46,1)
term.setTextColor(prog)
print("Login ")
print("                                                   ")
term.setCursorPos(1,18)
print("                                                   ")
term.setBackgroundColor(tbar)
term.setTextColor(tbartxt)
write("(C)Chickenbread 2015       ")
if freeSpace >= 100000000 then
 spacer = "     To many free Space"
 format = " "
elseif freeSpace <= 10000000 and freeSpace >= 1000000 then
 spacer = "         Free:"
elseif freeSpace <= 1000000 and freeSpace >= 100000 then
 spacer = "          Free:"
elseif freeSpace <= 100000 and freeSpace >= 10000 then
 spacer = "           Free:"
elseif freeSpace <= 10000 and freeSpace >= 1000 then
 spacer = "            Free:"
elseif freeSpace <= 1000 and freeSpace >= 100 then
 spacer = "             Free:"
elseif freeSpace <= 100 and freeSpace >= 10 then
 spacer = "              Free:"
elseif freeSpace <= 10 and freeSpace >= 1 then
 spacer = "               Free:"
else
 spacer = "          No Free Space"
 format = " "
end
write(spacer.." "..freeSpace.." "..format)
end

local function Login()
 paintutils.drawImage(Loginback,1,3)
 term.setBackgroundColor(colors.gray)
 term.setTextColor(colors.cyan)
 term.setCursorPos(8,9)
 write("Username:")
 term.setBackgroundColor(colors.white)
 write("                                   ")
 term.setCursorPos(17,8)
 write("                                   ")
 term.setCursorPos(17,10)
 write("                                   ")
 term.setCursorPos(18,9)
 UserName = read()
 
 if UserName == "Reboot" then
  os.reboot()
 elseif UserName == "Shutdown" then
  os.shutdown()
 elseif UserName == "" then
  Login()
 end
 
 term.setBackgroundColor(colors.gray)
 term.setCursorPos(8,9)
 write("Password:")
 term.setBackgroundColor(colors.white)
 write("                                   ")
 term.setCursorPos(18,9)
 local UserPass = read("*")
 
 if UserPass == "" then
  Login()
 end
 local file = fs.open("/User/"..UserName.."/..meta", "r")
 local fileData = {}
 local line = file.readLine()
 repeat
 table.insert(fileData,line)
 line = file.readLine()
 until line == nil
 file.close()
 ruserpass = fileData[1]
 type = fileData[2]
 userpasse = encryption.sha256(UserPass)
 if userpasse == ruserpass then
  if type == "admin" then
   admin = true
  else
   admin = false
  end
  login = true
  term.setTextColor(tbartxt)
  term.setCursorPos(1,1)
  term.setBackgroundColor(tbar)
  print("                                                   ")
  term.setCursorPos(1,1)
  write(OStag)
  if rosdebug then
   term.setTextColor(colors.red)
   print(" "..devpart.." "..version)
  else
   print(" "..devpart.." "..version)
  end
  print("                                                   ")
  paintutils.drawImage(Loginback,1,3)
  term.setCursorPos(1,18)
  term.setBackgroundColor(tbar)
  term.setTextColor(tbartxt)
  print("                                                   ")
  write("(C)Chickenbread 2015       ")
  if freeSpace >= 100000000 then
   spacer = "     To many free Space"
   format = " "
  elseif freeSpace <= 10000000 and freeSpace >= 1000000 then
   spacer = "         Free:"
  elseif freeSpace <= 1000000 and freeSpace >= 100000 then
   spacer = "          Free:"
  elseif freeSpace <= 100000 and freeSpace >= 10000 then
   spacer = "           Free:"
  elseif freeSpace <= 10000 and freeSpace >= 1000 then
   spacer = "            Free:"
  elseif freeSpace <= 1000 and freeSpace >= 100 then
   spacer = "             Free:"
  elseif freeSpace <= 100 and freeSpace >= 10 then
   spacer = "              Free:"
  elseif freeSpace <= 10 and freeSpace >= 1 then
   spacer = "               Free:"
  else
   spacer = "           No Free"
   format = "Space "
  end
  write(spacer.." "..freeSpace.." "..format)
  if fs.exists("/User/"..UserName.."/Pictures/wallpaper.nfp") then
   Wallpaper = paintutils.loadImage("/User/"..UserName.."/Pictures/wallpaper.nfp")
  else
   fs.copy("/User/root/Pictures/wallpaper.nfp", "/User/"..UserName.."/Pictures/wallpaper.nfp")
   Wallpaper = paintutils.loadImage("/User/"..UserName.."/Pictures/wallpaper.nfp")
  end
  term.setTextColor(colors.cyan)
  term.setBackgroundColor(colors.gray)
  welcome()
  welcome()
  welcome()
  welcome()
  welcome()
  shell.run("/ReboOSt/main")
  if login == false then
   term.setCursorPos(1,1)
   term.setBackgroundColor(tbar)
   term.setTextColor(tbartxt)
   print("                                                  ")
   term.setCursorPos(1,1)
   write(OStag)
   if rosdebug then
    term.setTextColor(colors.red)
    print(" "..devpart.." "..version)
   else
    print(" "..devpart.." "..version)
   end
   term.setCursorPos(46,1)
   term.setTextColor(prog)
   print("Login ")
   print("                                                   ")
   term.setCursorPos(1,18)
   print("                                                   ")
   Login()
  elseif login then
  end
 else
  term.setCursorPos(18,10)
  term.setTextColor(colors.cyan)
  print("Wrong Username or Password")
  sleep(1)
  Login()
 end
end

local function Start()
 if login then
  term.setCursorBlink(false)
  shell.run("/ReboOSt/main")
  if shellacc then
  else
   Start()
  end
 else
  term.setCursorBlink(false)
  FirstDraw()
  Login()
 end
end

Start()

else
 term.setTextColor(16384)
 term.setBackgroundColor(32768)
 print("You don't even have ReboOSt started!")
 term.setTextColor(1)
end
