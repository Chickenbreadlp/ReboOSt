local inet = nil
local changes = false

if login then
function Screen()
term.setBackgroundColor(mbar)
term.clear()
term.setCursorPos (1,1)
term.setBackgroundColor(tbar)
term.setTextColor(tbartxt)
print("                                                  ")
term.setCursorPos(1,1)
term.setBackgroundColor(mbar)
term.setTextColor(mbartxt)
write(OStag)
term.setBackgroundColor(tbar)
if rosdebug then
 term.setTextColor(colors.red)
 print(" "..devpart.." "..version)
else
 term.setTextColor(tbartxt)
 print(" "..devpart.." "..version)
end
term.setCursorPos(41,1)
term.setTextColor(prog)
print("Appearance ")
term.setBackgroundColor(mbar)
term.setTextColor(mbartxt)
print("")
print("")
write("System Bars:      [")
term.setTextColor(tbartxt)
term.setBackgroundColor(colors.black)
if tbar == colors.black then write("X") else write(" ") end
term.setBackgroundColor(colors.gray)
if tbar == colors.gray then write("X") else write(" ") end
term.setBackgroundColor(colors.lightGray)
if tbar == colors.lightGray then write("X") else write(" ") end
term.setBackgroundColor(colors.white)
if tbar == colors.white then write("X") else write(" ") end
term.setBackgroundColor(colors.yellow)
if tbar == colors.yellow then write("X") else write(" ") end
term.setBackgroundColor(colors.orange)
if tbar == colors.orange then write("X") else write(" ") end
term.setBackgroundColor(colors.red)
if tbar == colors.red then write("X") else write(" ") end
term.setBackgroundColor(colors.purple)
if tbar == colors.purple then write("X") else write(" ") end
term.setBackgroundColor(colors.magenta)
if tbar == colors.magenta then write("X") else write(" ") end
term.setBackgroundColor(colors.lightBlue)
if tbar == colors.lightBlue then write("X") else write(" ") end
term.setBackgroundColor(colors.cyan)
if tbar == colors.cyan then write("X") else write(" ") end
term.setBackgroundColor(colors.blue)
if tbar == colors.blue then write("X") else write(" ") end
term.setBackgroundColor(colors.green)
if tbar == colors.green then write("X") else write(" ") end
term.setBackgroundColor(colors.lime)
if tbar == colors.lime then write("X") else write(" ") end
term.setBackgroundColor(colors.pink)
if tbar == colors.pink then write("X") else write(" ") end
term.setBackgroundColor(colors.brown)
if tbar == colors.brown then write("X") else write(" ") end
term.setBackgroundColor(mbar)
term.setTextColor(mbartxt)
print("]")
write("Panel Color:      [")
term.setBackgroundColor(colors.black)
if mbar == colors.black then write("X") else write(" ") end
term.setBackgroundColor(colors.gray)
if mbar == colors.gray then write("X") else write(" ") end
term.setBackgroundColor(colors.lightGray)
if mbar == colors.lightGray then write("X") else write(" ") end
term.setBackgroundColor(colors.white)
if mbar == colors.white then write("X") else write(" ") end
term.setBackgroundColor(colors.yellow)
if mbar == colors.yellow then write("X") else write(" ") end
term.setBackgroundColor(colors.orange)
if mbar == colors.orange then write("X") else write(" ") end
term.setBackgroundColor(colors.red)
if mbar == colors.red then write("X") else write(" ") end
term.setBackgroundColor(colors.purple)
if mbar == colors.purple then write("X") else write(" ") end
term.setBackgroundColor(colors.magenta)
if mbar == colors.magenta then write("X") else write(" ") end
term.setBackgroundColor(colors.lightBlue)
if mbar == colors.lightBlue then write("X") else write(" ") end
term.setBackgroundColor(colors.cyan)
if mbar == colors.cyan then write("X") else write(" ") end
term.setBackgroundColor(colors.blue)
if mbar == colors.blue then write("X") else write(" ") end
term.setBackgroundColor(colors.green)
if mbar == colors.green then write("X") else write(" ") end
term.setBackgroundColor(colors.lime)
if mbar == colors.lime then write("X") else write(" ") end
term.setBackgroundColor(colors.pink)
if mbar == colors.pink then write("X") else write(" ") end
term.setBackgroundColor(colors.brown)
if mbar == colors.brown then write("X") else write(" ") end
term.setBackgroundColor(mbar)
print("]")
write("Menu Colors:      [")
term.setTextColor(bodytxt)
term.setBackgroundColor(colors.black)
if body == colors.black then write("X") else write(" ") end
term.setBackgroundColor(colors.gray)
if body == colors.gray then write("X") else write(" ") end
term.setBackgroundColor(colors.lightGray)
if body == colors.lightGray then write("X") else write(" ") end
term.setBackgroundColor(colors.white)
if body == colors.white then write("X") else write(" ") end
term.setBackgroundColor(colors.yellow)
if body == colors.yellow then write("X") else write(" ") end
term.setBackgroundColor(colors.orange)
if body == colors.orange then write("X") else write(" ") end
term.setBackgroundColor(colors.red)
if body == colors.red then write("X") else write(" ") end
term.setBackgroundColor(colors.purple)
if body == colors.purple then write("X") else write(" ") end
term.setBackgroundColor(colors.magenta)
if body == colors.magenta then write("X") else write(" ") end
term.setBackgroundColor(colors.lightBlue)
if body == colors.lightBlue then write("X") else write(" ") end
term.setBackgroundColor(colors.cyan)
if body == colors.cyan then write("X") else write(" ") end
term.setBackgroundColor(colors.blue)
if body == colors.blue then write("X") else write(" ") end
term.setBackgroundColor(colors.green)
if body == colors.green then write("X") else write(" ") end
term.setBackgroundColor(colors.lime)
if body == colors.lime then write("X") else write(" ") end
term.setBackgroundColor(colors.pink)
if body == colors.pink then write("X") else write(" ") end
term.setBackgroundColor(colors.brown)
if body == colors.brown then write("X") else write(" ") end
term.setBackgroundColor(mbar)
term.setTextColor(mbartxt)
print("]")
write("Wallpaper         [")
term.setTextColor(colors.white)
term.setBackgroundColor(colors.lime)
write("     Modify     ")
term.setBackgroundColor(mbar)
term.setTextColor(mbartxt)
print("]")
term.setCursorPos(1,15)
write("     [")
term.setBackgroundColor(colors.red)
term.setTextColor(colors.white)
write("Discard Changes")
term.setBackgroundColor(mbar)
term.setTextColor(mbartxt)
write("]          [")
if changes then term.setBackgroundColor(colors.lime) else term.setBackgroundColor(colors.lightGray) end
term.setTextColor(colors.white)
write("Save Changes")
term.setBackgroundColor(mbar)
term.setTextColor(mbartxt)
write("]")
term.setCursorPos(1,19)
term.setBackgroundColor(tbar)
write("                                                   ")
term.setCursorPos(1,19)
write(UserName)
local fslen = string.len(freeSpace)
local fsX = 49 - fslen
term.setCursorPos(fsX,19)
write(freeSpace)
term.setTextColor(sndtxt)
write(" KB")
end
Screen()

while true do
local event, button, X, Y = os.pullEvent("mouse_click")
local XY = X..","..Y

 -- Back
if X >= 1 and X <= 7 and Y == 1 then shell.run("/User/"..UserName.."/..colortheme")
 if rosloging then
  roslog.writeLine(shell.getRunningProgram()..": going back to mainframe")
 end
 break
end

 -- tbar
if XY == "20,4" and button == 1 then tbar = colors.black tbartxt = colors.white prog = colors.gray sndtxt = colors.cyan changes = true Screen() end -- tBar Black
if XY == "21,4" and button == 1 then tbar = colors.gray tbartxt = colors.white prog = colors.lightGray sndtxt = colors.cyan changes = true Screen() end -- tbar Gray
if XY == "22,4" and button == 1 then tbar = colors.lightGray tbartxt = colors.white prog = colors.white sndtxt = colors.cyan changes = true Screen() end -- tbar lightGray
if XY == "23,4" and button == 1 then tbar = colors.white tbartxt = colors.black prog = colors.lightGray sndtxt = colors.cyan changes = true Screen() end -- tbar White
if XY == "24,4" and button == 1 then tbar = colors.yellow tbartxt = colors.black prog = colors.red sndtxt = colors.cyan changes = true Screen() end -- tbar Yellow
if XY == "25,4" and button == 1 then tbar = colors.orange tbartxt = colors.white prog = colors.red sndtxt = colors.cyan changes = true Screen() end -- tbar Orange
if XY == "26,4" and button == 1 then tbar = colors.red tbartxt = colors.white prog = colors.orange sndtxt = colors.lime changes = true Screen() end -- tbar Red
if XY == "27,4" and button == 1 then tbar = colors.purple tbartxt = colors.white prog = colors.magenta sndtxt = colors.lime changes = true Screen() end -- tbar Purple
if XY == "28,4" and button == 1 then tbar = colors.magenta tbartxt = colors.white prog = colors.pink sndtxt = colors.cyan changes = true Screen() end -- tbar Magenta
if XY == "29,4" and button == 1 then tbar = colors.lightBlue tbartxt = colors.white prog = colors.cyan sndtxt = colors.gray changes = true Screen() end -- tbar light blue
if XY == "30,4" and button == 1 then tbar = colors.cyan tbartxt = colors.white prog = colors.blue sndtxt = colors.blue changes = true Screen() end -- tbar Cyan
if XY == "31,4" and button == 1 then tbar = colors.blue tbartxt = colors.white prog = colors.lightBlue sndtxt = colors.cyan changes = true Screen() end -- tbar Blue
if XY == "32,4" and button == 1 then tbar = colors.green tbartxt = colors.white prog = colors.lime sndtxt = colors.lime changes = true Screen() end -- tbar green
if XY == "33,4" and button == 1 then tbar = colors.lime tbartxt = colors.white prog = colors.green sndtxt = colors.cyan changes = true Screen() end -- tbar lime
if XY == "34,4" and button == 1 then tbar = colors.pink tbartxt = colors.white prog = colors.magenta sndtxt = colors.magenta changes = true Screen() end -- tbar pink
if XY == "35,4" and button == 1 then tbar = colors.brown tbartxt = colors.white prog = colors.red sndtxt = colors.red changes = true Screen() end -- tbar brown

 -- mbar
if XY == "20,5" and button == 1 then mbar = colors.black mbartxt = colors.white changes = true Screen() end -- mbar black
if XY == "21,5" and button == 1 then mbar = colors.gray mbartxt = colors.white changes = true Screen() end -- mbar gray
if XY == "22,5" and button == 1 then mbar = colors.lightGray mbartxt = colors.white changes = true Screen() end -- mbar light gray
if XY == "23,5" and button == 1 then mbar = colors.white mbartxt = colors.black changes = true Screen() end -- mbar white
if XY == "24,5" and button == 1 then mbar = colors.yellow mbartxt = colors.black changes = true Screen() end -- mbar yellow
if XY == "25,5" and button == 1 then mbar = colors.orange mbartxt = colors.white changes = true Screen() end -- mbar orange
if XY == "26,5" and button == 1 then mbar = colors.red mbartxt = colors.white changes = true Screen() end -- mbar red
if XY == "27,5" and button == 1 then mbar = colors.purple mbartxt = colors.white changes = true Screen() end -- mbar purple
if XY == "28,5" and button == 1 then mbar = colors.magenta mbartxt = colors.white changes = true Screen() end -- mbar magenta
if XY == "29,5" and button == 1 then mbar = colors.lightBlue mbartxt = colors.white changes = true Screen() end -- mbar light blue
if XY == "30,5" and button == 1 then mbar = colors.cyan mbartxt = colors.white changes = true Screen() end -- mbar cyan
if XY == "31,5" and button == 1 then mbar = colors.blue mbartxt = colors.white changes = true Screen() end -- mbar blue
if XY == "32,5" and button == 1 then mbar = colors.green mbartxt = colors.white changes = true Screen() end -- mbar green
if XY == "33,5" and button == 1 then mbar = colors.lime mbartxt = colors.white changes = true Screen() end -- mbar lime
if XY == "34,5" and button == 1 then mbar = colors.pink mbartxt = colors.white changes = true Screen() end -- mbar pink
if XY == "35,5" and button == 1 then mbar = colors.brown mbartxt = colors.white changes = true Screen() end -- mbar brown

 -- body
if XY == "20,6" and button == 1 then body = colors.black bodytxt = colors.white changes = true Screen() end -- body black
if XY == "21,6" and button == 1 then body = colors.gray bodytxt = colors.white changes = true Screen() end -- body gray
if XY == "22,6" and button == 1 then body = colors.lightGray bodytxt = colors.white changes = true Screen() end -- body light gray
if XY == "23,6" and button == 1 then body = colors.white bodytxt = colors.black changes = true Screen() end -- body white
if XY == "24,6" and button == 1 then body = colors.yellow bodytxt = colors.black changes = true Screen() end -- body yellow
if XY == "25,6" and button == 1 then body = colors.orange bodytxt = colors.white changes = true Screen() end -- body orange
if XY == "26,6" and button == 1 then body = colors.red bodytxt = colors.white changes = true Screen() end -- body red
if XY == "27,6" and button == 1 then body = colors.purple bodytxt = colors.white changes = true Screen() end -- body purple
if XY == "28,6" and button == 1 then body = colors.magenta bodytxt = colors.white changes = true Screen() end -- body magenta
if XY == "29,6" and button == 1 then body = colors.lightBlue bodytxt = colors.white changes = true Screen() end -- body light blue
if XY == "30,6" and button == 1 then body = colors.cyan bodytxt = colors.white changes = true Screen() end -- body cyan
if XY == "31,6" and button == 1 then body = colors.blue bodytxt = colors.white changes = true Screen() end -- body blue
if XY == "32,6" and button == 1 then body = colors.green bodytxt = colors.white changes = true Screen() end -- body green
if XY == "33,6" and button == 1 then body = colors.lime bodytxt = colors.white changes = true Screen() end -- body lime
if XY == "34,6" and button == 1 then body = colors.pink bodytxt = colors.white changes = true Screen() end -- body pink
if XY == "35,6" and button == 1 then body = colors.brown bodytxt = colors.white changes = true Screen() end -- body brown

 -- wallpaper
if X >= 20 and X <= 35 and Y == 7 and button == 1 then
 shell.run("/Programs/sketch", "/User/"..UserName.."/Pictures/wallpaper.nfp")
 Wallpaper = paintutils.loadImage("/User/"..UserName.."/Pictures/wallpaper.nfp")
 Screen()
 end

 -- Save
if X >= 34 and X <= 45 and Y == 15 and button == 1 and changes then
 local file = fs.open("/User/"..UserName.."/..colortheme", "w")
 file.writeLine("tbar = "..tbar)
 file.writeLine("mbar = "..mbar)
 file.writeLine("body = "..body)
 file.writeLine("crashscreen = "..tbar)
 file.writeLine("crashscreentxt = "..prog)
 file.writeLine("prog = "..prog)
 file.writeLine("buttonBack = "..buttonBack)
 file.writeLine("buttonBatxt = colors.white")
 file.writeLine("buttonReboot = "..buttonReboot)
 file.writeLine("buttonRetxt = colors.white")
 file.writeLine("buttonShut = "..buttonShut)
 file.writeLine("buttonShtxt = colors.white")
 file.writeLine("tbartxt = "..tbartxt)
 file.writeLine("mbartxt = "..mbartxt)
 file.writeLine("bodytxt = "..bodytxt)
 file.writeLine("sndtxt = "..sndtxt)
 file.close()
 changes = false
 Screen()
end

 -- Discard
if X >= 7 and X <= 21 and Y == 15 and button == 1 then shell.run("/User/"..UserName.."/..colortheme") changes = false Screen() end
end

else
 term.setTextColor(16384)
 term.setBackgroundColor(32768)
 print("You don't even have ReboOSt started!")
 term.setTextColor(1)
end
