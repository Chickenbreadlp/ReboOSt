if login then

local diskiconactiv = false
local deskback = true

term.setBackgroundColor(body)
term.setTextColor(bodytxt)
term.setCursorPos(14,2)
write("Themes        ")
term.setCursorPos(14,3)
write("About OS      ")
term.setCursorPos(14,4)
write("Register     ")
if admin then print(" ") else print("!") end
term.setCursorPos(14,5)
write("Updater      ")
if admin then print(" ") else print("!") end
term.setCursorPos(14,6)
write("Control Panel")
if admin then print(" ") else print("!") end

local function menuundo()
 if keepmenu == false then
  term.setBackgroundColor(tbar)
  term.setTextColor(tbartxt)
  term.setCursorPos(1,1)
  print(OStag)
 end
 paintutils.drawImage(Wallpaper,1,2)
 if fs.exists("/disk") then
  paintutils.drawImage(disklogo,2,4)
  term.setCursorPos(2,8)
  term.setBackgroundColor(mbar)
  term.setTextColor(mbartxt)
  print("Disk")
  diskiconactiv = true
 else
  if diskiconactiv then
   paintutils.drawImage(Wallpaper,1,2)
  else
  end
 end
end
 

while true do
local event, button, X, Y = os.pullEvent("mouse_click")
XY = X..","..Y

 -- Themes

if X >= 14 and X <= 27 and Y == 2 then
 if rosloging then
  roslog.writeLine(shell.getRunningProgram()..": executing: /ReboOSt/thmchg")
 end
 shell.run("/ReboOSt/thmchg")
 keepmenu = false
break

 -- About OS

elseif X >= 14 and X < 27 and Y == 3 then
 if rosloging then
  roslog.writeLine(shell.getRunningProgram()..": executing: /ReboOSt/info")
 end
 shell.run("/ReboOSt/info")
 keepmenu = false
break

 -- Register

elseif X >= 14 and X < 27 and Y == 4 then
 if admin then
  keepmenu = false
  menuundo()
  if rosloging then
   roslog.writeLine(shell.getRunningProgram()..": executing: /ReboOSt/regist")
  end
  shell.run("/ReboOSt/regist")
  break
 end

 -- Updater

elseif X >= 14 and X < 27 and Y == 5 then
 if admin then
  keepmenu = false
  menuundo()
  if rosloging then
   roslog.writeLine(shell.getRunningProgram()..": executing: /ReboOSt/updater")
  end
  shell.run("/ReboOSt/updater")
 break
 end

 -- Control Panel

elseif X >= 14 and X < 27 and Y == 6 then
 if admin then
  if rosloging then
   roslog.writeLine(shell.getRunningProgram()..": executing: /ReboOSt/ctrlpnl")
  end
  shell.run("/ReboOSt/ctrlpnl")
  keepmenu = false
  break
 end

 -- Go back

elseif X >= 1 and X <= 13 and Y >= 2 and Y <= 9 then
 if rosloging then
  roslog.writeLine(shell.getRunningProgram()..": going back to Unimenu")
 end
 keepmenu = true
 menuundo()
 break
else
 if rosloging then
  roslog.writeLine(shell.getRunningProgram()..": going back to mainframe")
 end
 keepmenu = false
 menuundo()
 break
end end
else
 term.setTextColor(16384)
 term.setBackgroundColor(32768)
 print("You don't even have ReboOSt started!")
 term.setTextColor(1)
end
