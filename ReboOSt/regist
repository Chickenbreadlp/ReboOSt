if login then

local acc = ""

function Regist()
term.setBackgroundColor(tbar)
term.setTextColor(prog)
term.setCursorPos(36,1)
print("   Registration ")
term.setTextColor(sndtxt)
term.setCursorPos(15,5)
write("                      ")
term.setCursorPos(17,7)
print("                                   ")
print("                ")
write("       Username:")
term.setBackgroundColor(colors.white)
print("                                   ")
term.setBackgroundColor(tbar)
write("                ")
term.setBackgroundColor(colors.white)
print("                                   ")
term.setBackgroundColor(tbar)
print("                                                   ")
print("                                                   ")
term.setBackgroundColor(colors.white)
term.setCursorPos(18,9)
local Name = read()

if Name == "" then
 term.setCursorPos(18,10)
 print("Please enter in a Username!")
 sleep(2.5)
 Regist()
elseif Name == "Reboot" or Name == "Shutdown" or Name == "root" then
 term.setCursorPos(18,10)
 print("Forbidden Username")
 sleep(2.5)
 Regist()
elseif string.len(Name) >= 34 then
 term.setCursorPos(18,10)
 print("Username is too long!")
 sleep(2.5)
 Regist()
elseif Name == "END" then
elseif fs.exists("/User/"..Name) then
 term.setCursorPos(18,10)
 print("Username is already in use!")
 sleep(2.5)
 Regist()
else
 term.setCursorPos(17,7)
 term.setBackgroundColor(tbar)
 print(Name)
 term.setCursorPos(8,9)
 write("Password:")
 term.setBackgroundColor(colors.white)
 print("                                   ")
 term.setCursorPos(18,9)
 local Password = read("*")

 if Password == "" then
  term.setCursorPos(18,10)
  print("Please enter in a Password!")
  sleep(2.5)
  Regist()
 else

  fs.makeDir("/User/"..Name)
  local pass = encryption.sha256(Password)
  local file = fs.open("/User/"..Name.."/..meta", "w")
  file.writeLine(pass)
  file.writeLine(acc)
  file.close()
  fs.copy("/User/root/Pictures", "/User/"..Name.."/Pictures")
  fs.copy("/ReboOSt/configs/colortheme", "/User/"..UserName.."/..colortheme")
  term.setCursorPos(18,10)
  print("Registration was successfull!")
  sleep(2)
 end
end
end

function Screen()
term.setBackgroundColor(tbar)
term.clear()
term.setCursorPos(1,1)
print("                                                  ")
term.setCursorPos(1,1)
term.setBackgroundColor(mbar)
term.setTextColor(mbartxt)
write(OStag)
term.setBackgroundColor(tbar)
if rosdebug then
 term.setTextColor(colors.red)
 print(" "..devpart.." "..version)
else
 term.setTextColor(tbartxt)
 print(" "..devpart.." "..version)
end
term.setTextColor(prog)
term.setCursorPos(37,1)
write("Registration ")
term.setBackgroundColor(buttonReboot)
term.setTextColor(buttonRetxt)
write("@")
term.setBackgroundColor(buttonShut)
term.setTextColor(buttonShtxt)
print("X")
term.setBackgroundColor(mbar)
print("                                                   ")
print("                                                   ")
term.setBackgroundColor(tbar)
term.setTextColor(sndtxt)
term.setCursorPos(15,5)
write("Which type of Account?")
term.setBackgroundColor(colors.white)
term.setCursorPos(1,8)
print("                                                   ")
print("             Standart Account        X             ")
print("                                                   ")
print("             Admin Account           X             ")
print("                                                   ")
term.setCursorPos(1,19)
term.setBackgroundColor(tbar)
term.setTextColor(tbartxt)
write(UserName)
local fslen = string.len(freeSpace)
local fsX = 49 - fslen
term.setCursorPos(fsX,19)
write(freeSpace.." KB")
end
Screen()

while true do
local event, button, X, Y = os.pullEvent("mouse_click")
local XY = X..","..Y

 -- shut down

if XY == "51,1" and button == 1 then
shell.run("/ReboOSt/shut-off")
Screen()

 -- reboot

elseif XY == "50,1" and button == 1 then
shell.run("/ReboOSt/reboot")
Screen()

 -- Back

elseif X >= 1 and X <= 7 and Y == 1 and button == 1 then
break

 -- Standart

elseif XY == "38,9" and button == 1 then
 acc = "stand"
 Regist()
break

 -- Admin

elseif XY == "38,11" and button == 1 then
 acc = "admin"
 Regist()
break
end end

else
 term.setTextColor(16384)
 term.setBackgroundColor(32768)
 print("You don't even have ReboOSt started!")
 term.setTextColor(1)
end
