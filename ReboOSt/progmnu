if login then
local deskback = true

term.setBackgroundColor(body)
term.setTextColor(bodytxt)
term.setCursorPos(14,3)
print("File Browser")
term.setCursorPos(14,4)
print("Snake       ")
term.setCursorPos(14,5)
print("Redirection ")
term.setCursorPos(14,6)
print("Sketch      ")
term.setCursorPos(14,7)
print("luaIDE      ")


local function menuundo()
 paintutils.drawImage(Wallpaper,1,2)
 term.setCursorPos(1,18)
 term.setBackgroundColor(tbar)
 term.setTextColor(tbartxt)
 print(UserName)
 if fs.exists("/disk") then
  paintutils.drawImage(disklogo,2,4)
  term.setCursorPos(2,8)
  term.setBackgroundColor(body)
  term.setTextColor(bodytxt)
  print("Disk")
  diskiconactiv = true
 else
  if diskiconactiv then
   paintutils.drawImage(Wallpaper,1,2)
   term.setCursorPos(1,18)
   term.setBackgroundColor(tbar)
   term.setTextColor(tbartxt)
   print(UserName)
  else
  end
 end
end

while true do
local event, button, X, Y = os.pullEvent("mouse_click")
local XY = X..","..Y

 -- shut down

if XY == "51,1" and button == 1 then
menuundo()
shell.run("/ReboOSt/shut-off")
break

 -- reboot

elseif XY == "50,1" and button == 1 then
menuundo()
shell.run("/ReboOSt/reboot")
break

 -- browser

elseif X >= 14 and X <= 24 and Y == 3 then
 dir = ""
 shell.run("/ReboOSt/fbrws", "--dir "..dir)
 dir = nil
 keepmenu = false
break

 -- Snake

elseif X >= 14 and X <= 24 and Y == 4 then
 term.setBackgroundColor(32768)
 term.setTextColor(1)
 shell.run("worm")
 keepmenu = false
break

 -- Redirection

elseif X >= 14 and X <= 24 and Y == 5 then
 shell.run("redirection")
 keepmenu = false
break

 -- Sketch

elseif X >= 14 and X <= 24 and Y == 6 then
 shell.run("/Programs/sketch")
 keepmenu = false
break

 -- luaIDE

elseif X >= 14 and X <= 24 and Y == 7 then
 shell.run("/ReboOSt/luaIDE")
 keepmenu = false
break

 -- Logoff

elseif XY == "51,18" and button == 1 then
 menuundo()
 term.setBackgroundColor(wico)
 term.setTextColor(wicotxt)
 term.setCursorPos(14,7)
 print("        Logoff        ")
 term.setBackgroundColor(wicotxt)
 term.setTextColor(wico)
 term.setCursorPos(14,8)
 print("                      ")
 term.setCursorPos(14,9)
 print("    Logging off...    ")
 term.setCursorPos(14,10)
 print("                      ")
 sleep(1.2)
 shell.run("/ReboOSt/logoff")
break
end

 -- Go back

if X >= 1 and X <= 13 and Y >= 2 and Y <= 9 then
 keepmenu = true
 menuundo()
 break
else
 keepmenu = false
 menuundo()
 break
end end
else
 term.setTextColor(16384)
 term.setBackgroundColor(32768)
 print("You don't even have ReboOSt started!")
 term.setTextColor(1)
end
