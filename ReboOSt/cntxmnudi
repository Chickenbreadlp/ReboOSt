if login then
local dir = nil
if disk.isPresent("bottom") and not disk.hasAudio("bottom") then
 dir = disk.getMountPath("bottom")
 dir = dir.."/"
elseif disk.isPresent("top") and not disk.hasAudio("top") then
 dir = disk.getMountPath("top")
 dir = dir.."/"
elseif disk.isPresent("left") and not disk.hasAudio("left") then
 dir = disk.getMountPath("left")
 dir = dir.."/"
elseif disk.isPresent("right") and not disk.hasAudio("right") then
 dir = disk.getMountPath("right")
 dir = dir.."/"
elseif disk.isPresent("back") and not disk.hasAudio("back") then
 dir = disk.getMountPath("back")
 dir = dir.."/"
elseif disk.isPresent("front") and not disk.hasAudio("front") then
 dir = disk.getMountPath("front")
 dir = dir.."/"
end

term.setCursorPos(rightclickdiskX,rightclickdiskY)
term.setBackgroundColor(body)
term.setTextColor(bodytxt)
print("Open         ")
rightclickdiskY = rightclickdiskY + 1
term.setCursorPos(rightclickdiskX,rightclickdiskY)
print("Eject        ")
rightclickdiskY = rightclickdiskY + 1
term.setCursorPos(rightclickdiskX,rightclickdiskY)
if fs.exists("Programs/TDI") then
 if fs.exists(dir.."tictactoe") or fs.exists(dir.."gameoflife") or fs.exists(dir.."maze3d") or fs.exists(dir.."protector") then
  print("TDI          ")
 else
  print("-------------")
 end
else
 print("-------------")
end
rightclickdiskY = rightclickdiskY + 1
term.setCursorPos(rightclickdiskX,rightclickdiskY)
print("Control Panel")
rightclickdiskY = rightclickdiskY - 3

local m = rightclickdiskX
local a = rightclickdiskX + 1
local b = rightclickdiskX + 2
local c = rightclickdiskX + 3
local d = rightclickdiskX + 4
local e = rightclickdiskX + 5
local f = rightclickdiskX + 6
local g = rightclickdiskX + 7
local h = rightclickdiskX + 8
local i = rightclickdiskX + 9
local j = rightclickdiskX + 10
local k = rightclickdiskX + 11
local l = rightclickdiskX + 12

local p = rightclickdiskY
local n = rightclickdiskY + 1
local q = rightclickdiskY + 2
local o = rightclickdiskY + 3

local function menuundo()
 term.setCursorPos(10,2)
 term.setBackgroundColor(mbartxt)
 term.setTextColor(mbar)
 print(" Files ")
 paintutils.drawImage(Background,1,3)
end

while true do
local event, button, X, Y = os.pullEvent("mouse_click")
local XY = X..","..Y

 -- shut down

if XY == "51,1" and button == 1 then
menuundo()
shell.run("/ReboOSt/shut-off")
break

 -- reboot

elseif XY == "50,1" and button == 1 then
menuundo()
shell.run("/ReboOSt/reboot")
break

 -- Open

elseif X >= m and X <= l and Y == p then
 dir = "disk/"
 shell.run("/ReboOSt/ice-browser")
 dir = nil
break

 -- Eject

elseif X >= m and X <= l and Y == n then
 disk.eject("bottom")
 disk.eject("top")
 disk.eject("left")
 disk.eject("right")
 disk.eject("back")
 disk.eject("front")
break

 -- Settings

elseif X >= m and X <= l and Y == o then
 shell.run("/ReboOSt/ctrlpnl")
break

 -- do nothing (TDI intigration)

elseif X >= m and X <= l and Y == q then
 if fs.exists("Programs/TDI") then
  if fs.exists(dir.."tictactoe") or fs.exists(dir.."gameoflife") or fs.exists(dir.."maze3d") or fs.exists(dir.."protector") then
   TDIunist = true
   shell.run("Programs/TDI")
  end
 break
 end

 -- Go back

else
break
end end
else
 term.setTextColor(16384)
 term.setBackgroundColor(32768)
 print("You don't even have ReboOSt started!")
 term.setTextColor(1)
end
